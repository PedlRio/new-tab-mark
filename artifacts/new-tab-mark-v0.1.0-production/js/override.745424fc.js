(function(){"use strict";var t={2904:function(t,e,o){var n=o(144),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("SidebarMenu",{ref:"Sidebar",on:{importaNota:t.openLocalFile,baixaNota:t.download,notaSelecionada:t.carregarNotaTiptap,notaCriada:t.criarEditorTiptap}}),t._v(" "),e("Tiptap",{ref:"tiptapEditor",on:{notaAtualizada:t.AtualziaNotaTiptap}})],1)},i=[],r=(o(8858),o(1318),o(3228),function(){var t=this,e=t._self._c;t._self._setupProxy;return e("editor-content",{staticClass:"editor",attrs:{editor:t.editor}})}),s=[],l=o(2128),c=o(336),d=o(3237),u=o(7490),p=o(2775),h=o(214),f=o(601),m=o(7605),g=o(3354),v=o(5003),b=o(9404),N=o(6761),S=o(3416);const y=c.Z.extend({content:"heading block*"});var C=(0,n.defineComponent)({components:{EditorContent:l.kg},data(){return{editor:null,isFirstHeadingEditing:!1}},mounted(){this.initializeEditor(),this.loadContent()},methods:{initializeEditor(t){this.editor=new l.ML({extensions:[y,p.Z.configure({document:!1,heading:!1}),u.Z.configure({HTMLAttributes:{class:"first-heading"}}),d.Z.configure({placeholder:({node:t})=>"heading"===t.type.name?"What’s the title?":"Can you add some further context?"}),h.ZP,f.ZP,m.ZP,g.Z,b.Z,S.ZP,N.ZP.configure({inline:!0,allowBase64:!0}),v.ZP.configure({allowedMimeTypes:["image/png","image/jpeg","image/gif","image/webp"],onDrop:(t,e,o)=>{e.forEach((e=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t.chain().insertContentAt(o,{type:"image",attrs:{src:n.result}}).focus().run()}}))},onPaste:(t,e)=>{e.forEach((e=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>{t.chain().insertContentAt(t.state.selection.anchor,{type:"image",attrs:{src:o.result}}).focus().run()}}))}})],editorProps:{attributes:{class:"markdown-body prose dark:prose-invert prose-sm sm:prose-base lg:prose-lg xl:prose-2xl m-5 focus:outline-none"}},content:localStorage.getItem("editorContent")||"\n          <h1>\n            What’s the title?\n          </h1>\n          <p></p>\n          <p></p>\n          <p></p>\n          <p></p>\n          <p></p>\n        ",onBlur:()=>this.saveContent()})},saveContent(){const t=this.editor.view.dom.querySelector("h1"),e=this.editor.getHTML();localStorage.setItem("editorContent",e),this.$emit("notaAtualizada",e,t)},loadContent(){const t=localStorage.getItem("editorContent");t&&this.editor.commands.setContent(t)},loadNoteContent(t){this.editor.commands.setContent(t.content),localStorage.setItem("editorContent",t.content),console.log(t.title),0===t.length&&localStorage.removeItem("editorContent")}},beforeUnmount(){this.editor.destroy()}}),w=C,E=o(1001),_=(0,E.Z)(w,r,s,!1,null,null,null),x=_.exports,k=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"sidebar"},[e("div",{staticClass:"group"},[e("div",{staticClass:"sidebar-header"},[e("h2",[t._v("Notas")]),e("button",{on:{click:t.criarNota}},[t._v("Criar Nota")])]),e("ul",{staticClass:"notes-list"},t._l(t.notas,(function(o,n){return e("li",{key:n,on:{click:function(e){return t.selecionarNota(o)}}},[t._v(" "+t._s(o.title)+" "),e("button",{on:{click:function(e){return t.excluirNota(n)}}},[t._v("Excluir")])])})),0),e("button",{on:{click:t.downloadNota}},[t._v("Exportar")]),t._v(" "),e("button",{on:{click:t.importaNota}},[t._v("importar")])])])},T=[],O=(o(560),{data(){return{notas:this.recuperarNotasSalvas()||[],ultimaNotaSelecionada:null}},methods:{criarNota(t){let e,o;if(t instanceof PointerEvent)o=`Nota ${this.notas.length+1}`,e=`<h1>Nota ${this.notas.length+1}</h1><p>Conteúdo da nova nota</p>`;else{e=t;const n=t.match(/<h1[^>]*>([^<]+)<\/h1>/i);o=n?n[1]:null}const n={id:Date.now(),title:o,content:e};this.notas.push(n),this.salvarNotas(this.notas,n),this.$emit("notaCriada",n),this.ultimaNotaSelecionada=n,localStorage.setItem("lastEditNote",n.id)},excluirNota(t){if(1===this.notas.length)this.$emit("notaSelecionada",[]),this.notas.splice(t,1);else if(this.notas.length-1===t){const e=this.notas[this.notas.length-2];e&&(this.$emit("notaSelecionada",e),this.notas.splice(t,1))}else this.notas.splice(t,1);this.salvarNotas(this.notas)},salvarNotas(t){localStorage.setItem("notas",JSON.stringify(t))},recuperarNotasSalvas(){const t=localStorage.getItem("notas");return t?JSON.parse(t):null},selecionarNota(t){this.$emit("notaSelecionada",t),this.ultimaNotaSelecionada=t,localStorage.setItem("lastEditNote",this.ultimaNotaSelecionada.id)},downloadNota(){this.$emit("baixaNota")},importaNota(){this.$emit("importaNota")}}}),$=O,Z=(0,E.Z)($,k,T,!1,null,"17e1da4a",null),A=Z.exports,P={name:"App",components:{SidebarMenu:A,Tiptap:x},methods:{criarEditorTiptap(t){console.log(t.id),this.$refs.tiptapEditor.editor.destroy(),this.$refs.tiptapEditor.initializeEditor(t.id),this.$refs.tiptapEditor.loadNoteContent(t)},carregarNotaTiptap(t){this.$refs.tiptapEditor.loadNoteContent(t)},AtualziaNotaTiptap(t,e){const o=Number(localStorage.getItem("lastEditNote")),n=JSON.parse(localStorage.getItem("notas"))||[],a=n.find((t=>t.id===o));a.content=t,a.title=e.innerText,this.salvarNotaAtualizada(a)},salvarNotaAtualizada(t){const e=this.$refs.Sidebar.notas,o=e.findIndex((e=>e.id===t.id));-1!==o&&(e.splice(o,1,t),localStorage.setItem("notas",JSON.stringify(e)))},download(){const t=this.$refs.tiptapEditor.editor.getHTML(),e=this.$refs.tiptapEditor.editor.view.dom.querySelector("h1").innerText,o=`${e}.html`,n=document.createElement("a"),a=new Blob([t],{type:"text/html"});n.href=URL.createObjectURL(a),n.download=o,document.body.appendChild(n),n.click(),document.body.removeChild(n)},openLocalFile(){const t=document.createElement("input");t.type="file",t.onchange=t=>{const e=t.target.files[0],o=new FileReader;o.onload=t=>{const e=t.target.result;console.log(e),this.$refs.Sidebar.criarNota(e)},o.readAsText(e)},t.click()}}};document.addEventListener("visibilitychange",(()=>{document.hidden||(console.log("A aba foi ativada novamente"),chrome.tabs.query({active:!0,currentWindow:!0},(t=>{t.length>0&&chrome.tabs.reload(t[0].id)})))}));var I=P,j=(0,E.Z)(I,a,i,!1,null,null,null),L=j.exports;new n["default"]({el:"#app",render:t=>t(L)})}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,o),i.exports}o.m=t,function(){var t=[];o.O=function(e,n,a,i){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],i=t[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((function(t){return o.O[t](n[l])}))?n.splice(l--,1):(s=!1,i<r&&(r=i));if(s){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,a,i]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.j=700}(),function(){var t={700:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,r=n[0],s=n[1],l=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(l)var d=l(o)}for(e&&e(n);c<r.length;c++)i=r[c],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(d)},n=self["webpackChunknew_tab_mark"]=self["webpackChunknew_tab_mark"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(2904)}));n=o.O(n)})();
//# sourceMappingURL=override.745424fc.js.map